# ipelago (in Python)

CLI personal microblog (命令行个人微博客)

纯命令行操作，包括两方面功能：

1. 写微博客并生成静态网站 (HTML 和 RSS)
2. 订阅别人的 RSS


## ipelago 之名

ipelago 源于群岛的英文 archipelago, 如果我们每一个人是一座孤岛，那么当我们搭建自己的微博客，大家的微博客聚在一起就可以形成群岛。


## 主要功能 (写微博客、订阅 RSS)

### 写微博客

- 多种方式方便写博文（包括命令行输入、获取剪贴板内容、获取文件内容、通过简陋的 GUI 窗口输入）。
- 可生成静态网站 (包括 HTML 和 RSS), 这些静态文件可通过 GitHub Pages 或类似的免费服务搭建你的私人微博客供别人浏览、订阅。
- 可区分公开消息与隐私消息，只有公开消息才会对外发布，隐私消息只能本地浏览。
- 有简单的 #标签 功能与搜索功能。

### 订阅 RSS

- 可通过 RSS 订阅别人的微博客。
- 只支持微博客（一条消息只有一两句话），不支持正常博客（长文章），因此数据库体积不会爆涨，只会一直保持很小的体积。
- 有限订阅（意思是不保存全部订阅消息，看到特别喜欢的内容可执行收藏命令，收藏的消息才会永久保存）。
- 可设置 proxy, 方便与翻墙软件搭配使用。

### 减少烦躁和焦虑

一般通过 App 或网页浏览消息时，会一目十行，快速上下滑动消息列表，这种操作有可能使烦躁和焦虑感变得更严重。

ipelago 也可一次列举多条消息，但更提倡使用逐条浏览功能，每次只显示一条消息，并且可以记住位置，随时离开去做别的事情，回头继续从上次中断的地方接着阅读。

因此，有助于减少烦躁与焦虑。


## 安装与初始化

安装非常简单，只要 `pip install ipelago` 即可。

安装后，第一次正式使用前，必须执行 'ago init [name]' 进行初始化，其中 name 是你的微博客名称，对外发布时别人可以看到。


## 常用命令示例

### 帮助

- `ago -h` (查看帮助消息)
- `ago post -h` (每个子命令也有详细的帮助消息)

### 写博文

- `ago post Hello World!` (写一条公开消息, 可通过 HTML 及 RSS 对外发布)
- `ago post -pri My password is abcd` (写一条隐私消息, 仅本地可见)
- `ago post -gui` (弹出一个简陋的 GUI 窗口方便输入)

### 阅读自己的微博客

- `ago tl` 阅读下一条消息（完全等同于 `ago tl -next`）
- `ago tl -first` 阅读最新一条消息
- `ago tl -next` 阅读下一条消息
- `ago tl -today` 阅读今天的消息
- `ago tl -yesterday` 阅读昨天的消息

### 订阅 RSS

- `ago news -follow https://v2ex.com/feed/create.xml -p HasTitle` 

- `ago news -follow [url]` 订阅 Atom/RSS
- `ago news --list` 查看已订阅的 RSS 列表
- `ago news -delete [id]` 删除指定的 RSS (取消订阅并删除消息)
- `ago news -feed [id] --set-id [new-id]` 修改指定 feed 的 id

默认采用 '--parser Base' 解析 RSS 内容，舍弃每篇博文的 title (因为有时 title 与正文重复)。

建议先看看 RSS 源文件，看 title 有没有必要显示，如果需要保留 title, 可使用以下命令订阅：

- `ago news -follow [url] --parser HasTitle`

也可在订阅后随时更改解析器：

- `ago news --update [id] --parser HasTitle`

有的 RSS 源文件在提供 `<content>` 的同时也提供 `<summary>`, 对于这种情况，建议采用 '--parser HasSuammry'。

### 真实的订阅例子

- `ago news -follow https://douchi.space/@mtfront.rss`
- `ago news -follow https://v2ex.com/feed/create.xml -p HasTitle`
- `ago news -follow https://geeknote.net/Rei/feed.atom -p HasSummary`

### 更新消息

需要手动执行命令才会拉取新消息（注意，旧消息不会被保存，拉取新消息会覆盖旧消息，可以用命令 `ago like [id]` 永久保全指定消息）。

- `ago news --update all` 批量更新
- `ago news --update [id]` 只更新指定的源

默认每个源每 24 小时只能更新一次，可使用 '-force' 参数强制更新，比如 `ago news -force -u [id]`, 但为了节约资源及减少焦虑，建议不要频繁更新。

